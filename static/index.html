<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <style>
      html,
      body {
        margin: 0;
        padding: 0;
      }
      img {
        width: 100vw;
        max-height: 80vh;
      }
      .control {
        display: flex;
      }
      .control label {
        width: 80px;
      }
      .control input {
        flex: 1;
      }
    </style>
  </head>
  <body>
    <img id="img" src="image.jpg" alt="image" />
    <div class="control">
      <label for="brightness">Brightness</label>
      <input id="brightness" type="range" min="0" max="200" step="0.1" />
    </div>
    <div class="control">
      <label for="contrast">Contrast</label>
      <input id="contrast" type="range" min="0" max="200" step="0.1" />
    </div>

    <script>
      let effects = JSON.parse(localStorage.getItem("effects")) || {
        brightness: 100,
        contrast: 100
      };

      const img = document.getElementById("img");
      const updateEffects = () => {
        img.style.filter =
          `brightness(${effects.brightness}%) ` +
          `contrast(${effects.contrast}%)`;

        localStorage.setItem("effects", JSON.stringify(effects, null, 0));
      };

      const changeHandler = e => {
        const effect = e.target.id;
        const value = parseFloat(e.target.value);
        effects[effect] = value;
        updateEffects();
      };

      const contrast = document.getElementById("contrast");
      contrast.addEventListener("change", changeHandler);
      contrast.value = effects.contrast;

      const brightness = document.getElementById("brightness");
      brightness.addEventListener("change", changeHandler);
      brightness.value = effects.brightness;

      updateEffects();
    </script>
  </body>
</html>
